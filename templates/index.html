<!DOCTYPE html>
<html lang="en">
{% macro position_select(name, id, selected_val, title="Select Position", classes="form-select") -%}
    <select name="{{ name }}" id="{{ id }}" class="{{ classes }}" title="{{ title }}">
        <option value="" {% if not selected_val %}selected{% endif %}>{{ title }}</option>
        {%- set positions = ['P', 'C', '1B', '2B', '3B', 'SS', 'LF', 'CF', 'RF', 'DH', 'EH'] -%}
        {%- for pos in positions -%}
            <option value="{{ pos }}" {% if selected_val == pos %}selected{% endif %}>{{ pos }}</option>
        {%- endfor -%}
    </select>
{%- endmacro %}
<head>
  <meta charset="UTF-8">
  <title>{% if current_team %}{{ current_team.team_name }} - Coach Planner{% else %}Coach Planner{% endif %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="manifest" href="/static/manifest.json">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
  <style>
    body {
        padding-bottom: 100px;
        overscroll-behavior-y: contain;
    }
    .navbar-brand .brand-text { font-size: 1.25rem; white-space: nowrap; }
    @media (max-width: 768px) {
        .navbar-brand .brand-text { font-size: 1rem; white-space: normal; line-height: 1.2; }
        .navbar-brand { padding-right: 0; }
    }
    @media (max-width: 480px) { .navbar-brand .brand-text { font-size: 0.9rem; } }
    .practice-plan { border-left: 3px solid #c8102e; }
    .task-item.complete { text-decoration: line-through; opacity: 0.6; }

    /* ADDED: Full-screen modal styles for the "More" menu */
    .more-menu-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(248, 249, 250, 0.98);
        z-index: 1040;
        padding: 20px;
        overflow-y: auto;
        transition: opacity 0.3s ease-in-out;
    }
    .more-menu-overlay.hidden {
        opacity: 0;
        pointer-events: none;
    }
    .more-menu-close-btn {
        position: absolute;
        top: 15px;
        right: 20px;
        font-size: 2rem;
        color: #6c757d;
        cursor: pointer;
        line-height: 1;
    }

    /* Desktop Nav Bar */
    .navbar-nav .nav-link.active {
      background-color: #c8102e;
      color: white;
      border-radius: 0.25rem;
    }
    .navbar-nav .nav-link { color: #212529; font-weight: 500; }
    .navbar-nav .nav-link:hover { color: #c8102e; }
    .navbar-nav .nav-link.active:hover { color: white; }

    .sortable-header {
        cursor: pointer;
    }
    .sortable-header:hover {
        background-color: #e9ecef;
    }
    .sortable-header .sort-icon {
        display: inline-block;
        width: 1em;
        margin-left: 5px;
        opacity: 0.4;
    }

    @media (min-width: 992px) {
        #navbarResponsive { display: flex; align-items: center; width: 100%; }
        body { padding-bottom: 0; }
    }

    @media (max-width: 991.98px) {
        #mainTabsDesktop .drag-handle { display: none; }
    }
    /* IMPORTANT: Ensure only one tab pane is visible at a time */
    .tab-content > .tab-pane {
        display: none;
    }
    .tab-content > .tab-pane.active {
        display: block;
    }

    /* Roster Accordion Specific Styles */
    #rosterAccordion .accordion-button {
        display: flex;
        align-items: center;
    }
    #rosterAccordion .accordion-button .drag-handle {
        margin-right: 10px;
    }
    #rosterAccordion .accordion-button strong {
        flex-grow: 1;
        text-align: left;
    }
    #rosterAccordion .accordion-body .form-control,
    #rosterAccordion .accordion-body .form-select {
        margin-bottom: 10px; /* Add some spacing between inline form elements */
    }
    #rosterAccordion .accordion-body .row.g-3 {
        align-items: flex-end; /* Align elements at the bottom */
    }

    /* Player Development Accordion Styles */
    #player-dev-accordion .accordion-item {
        border: 1px solid #dee2e6;
        border-radius: 0.375rem;
        margin-bottom: 0.5rem;
        box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    }
    #player-dev-accordion .accordion-button {
        background-color: #f8f9fa; /* Light background for distinction */
        color: #343a40;
        font-weight: 600;
        border-bottom: 1px solid #dee2e6;
        border-radius: 0.375rem; /* Rounded corners for the button */
    }
    #player-dev-accordion .accordion-button:not(.collapsed) {
        background-color: #e9ecef; /* Slightly darker when open */
        color: #212121;
        border-bottom-color: #ced4da;
    }
    #player-dev-accordion .accordion-body {
        background-color: #ffffff;
        padding: 1rem;
    }
    #player-dev-accordion .list-group-item {
        border-left: 3px solid #007bff; /* Default blue for active focus */
        margin-bottom: 0.5rem;
        padding-left: 1rem;
    }
    #player-dev-accordion .list-group-item.completed-focus {
        border-left-color: #28a745; /* Green for completed */
        opacity: 0.8;
    }
    #player-dev-accordion .list-group-item.lesson-entry {
        border-left-color: #ffc107; /* Yellow for lessons */
    }
    #player-dev-accordion .list-group-item.coach-note-entry {
        border-left-color: #17a2b8; /* Cyan for coach notes */
    }
  </style>
</head>
<body>

{% include '_top_nav.html' %}

<div class="container-fluid">
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <div class="tab-content">
    {# MODIFIED: Changed include from 'stats.html' to '_stats_content.html' #}
    <div class="tab-pane fade" id="stats_tab">
        {% include '_stats_content.html' %}
    </div>

    <div class="tab-pane fade" id="roster">
        <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
            <h4 class="mb-0">Current Roster</h4>
            <div class="d-flex align-items-center gap-2">
                <input type="search" id="rosterSearch" class="form-control" placeholder="Search for a player...">
                <button class="btn btn-primary text-nowrap" data-bs-toggle="modal" data-bs-target="#addPlayerModal">
                    <i class="bi bi-plus-circle"></i> New Player
                </button>
            </div>
        </div>
        <div class="accordion" id="rosterAccordion">
            </div>
    </div>

    <div class="tab-pane fade" id="player_development">
        <h4>Player Development</h4>
        <p>Track development goals and view a complete activity log for each player. Drag players to reorder the list.</p>
        <div class="accordion" id="player-dev-accordion"></div>
    </div>

    <div class="tab-pane fade" id="lineups">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h4>Unassigned Lineups</h4>
        <button class="btn btn-primary" id="createLineupBtn" data-bs-toggle="modal" data-bs-target="#lineupEditorModal">Create New Unassigned Lineup</button>
      </div>
      <div class="accordion" id="lineupsAccordion"></div>
    </div>

    <div class="tab-pane fade" id="pitching">
        <h4>Pitching Log & Count Tracker</h4>
        <div class="card mb-4">
          <div class="card-header"><strong>Pitch Count Summary</strong></div>
          <div class="card-body p-2"><div class="table-responsive" id="pitch-count-summary-container"></div></div>
        </div>
        <div class="row">
          <div class="col-lg-5 mb-4">
            <div class="card h-100">
              <div class="card-header"><strong>Add New Outing</strong></div>
              <div class="card-body">
                <form action="{{ url_for('add_pitching') }}" method="POST">
                  <div class="row g-3">
                    <div class="col-6"><label for="pitch_date" class="form-label">Date</label><input type="date" id="pitch_date" name="pitch_date" class="form-control" required></div>
                    <div class="col-6"><label for="pitching-log-pitcher-select" class="form-label">Pitcher</label><select name="pitcher" class="form-select" required id="pitching-log-pitcher-select"></select></div>
                    <div class="col-12"><label for="opponent" class="form-label">Opponent / Context</label><input type="text" id="opponent" name="opponent" class="form-control" placeholder="e.g., Scrimmage vs. Tigers"></div>
                    <div class="col-6"><label for="pitches" class="form-label">Pitch Count</label><input type="number" id="pitches" name="pitches" class="form-control" required></div>
                    <div class="col-6"><label for="innings" class="form-label">Innings Pitched</label><input type="text" id="innings" name="innings" class="form-control" placeholder="e.g., 2.1" required></div>
                    <div class="col-6"><label for="outing_type" class="form-label">Outing Type</label><select name="outing_type" id="outing_type" class="form-select"><option value="Game">Game</option><option value="External/Lesson">External/Lesson</option><option value="Practice">Practice</option></select></div>
                    <div class="col-6"><label for="pitcher_type" class="form-label">Pitcher Type</label><select name="pitcher_type" id="pitcher_type" class="form-select"><option value="Starter">Starter</option><option value="Reliever">Reliever</option></select></div>
                  </div>
                  <button type="submit" class="btn btn-primary w-100 mt-3">Log Outing</button>
                </form>
              </div>
            </div>
          </div>
          <div class="col-lg-7 mb-4">
             <div class="card h-100">
                <div class="card-header"><strong>Recent Outing History</strong></div>
                <div class="card-body p-0"><ul class="list-group list-group-flush" id="recorded-outings-list"></ul></div>
             </div>
          </div>
        </div>
      </div>

    <div class="tab-pane fade" id="scouting_list">
        <h4 class="mb-3">Scouting & Recruiting Lists</h4>
        <div class="row" id="scouting-list-container"><div class="text-center p-5"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div></div>
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Add New Scouted Player</h5>
                <form id="addScoutedPlayerForm" class="row g-3">
                    <div class="col-md-3"><input type="text" class="form-control" name="scouted_player_name" placeholder="Player Name" required></div>
                    <div class="col-md-2">{{ position_select('scouted_player_pos1', 'scouted_player_pos1', '', title='Pos 1') }}</div>
                    <div class="col-md-2">{{ position_select('scouted_player_pos2', 'scouted_player_pos2', '', title='Pos 2') }}</div>
                    <div class="col-md-2"><select name="scouted_player_throws" class="form-select"><option value="">Throws</option><option value="Right">Right</option><option value="Left">Left</option></select></div>
                    <div class="col-md-2"><select name="scouted_player_bats" class="form-select"><option value="">Bats</option><option value="Right">Right</option><option value="Left">Left</option></select></div>
                    <div class="col-md-4"><label class="form-label">Add to List:</label><select name="scouted_player_type" class="form-select"><option value="targets">Targets</option><option value="committed">Committed</option><option value="not_interested">Not Interested</option></select></div>
                    <div class="col-md-2 d-flex align-items-end"><button type="submit" class="btn btn-primary w-100">Add Player</button></div>
                </form>
                <div id="addScoutedPlayerFeedback" class="mt-2"></div>
            </div>
        </div>
    </div>

    <div class="tab-pane fade" id="rotations">
        <h4>Unassigned Rotations</h4>
        <p>Manage rotations that are not linked to a specific game. Game-specific rotations should be managed from the <a href="#games" data-bs-toggle="tab">Games</a> tab.</p>
        <div class="accordion" id="rotationsAccordion"></div>
    </div>

    <div class="tab-pane fade" id="games">
        <h4>Game Schedule & Management</h4>
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Add New Game</h5>
                <form action="{{ url_for('add_game') }}" method="POST" class="row g-3">
                    <div class="col-md-3"><input type="date" name="game_date" id="add_game_date" class="form-control" required></div>
                    <div class="col-md-3"><input type="text" name="game_opponent" class="form-control" placeholder="Opponent" required></div>
                    <div class="col-md-3"><input type="text" name="game_location" class="form-control" placeholder="Location"></div>
                    <div class="col-md-3"><button type="submit" class="btn btn-primary w-100">Add Game & Manage</button></div>
                    <div class="col-12"><textarea name="game_notes" class="form-control" rows="2" placeholder="Game Notes (e.g., arrival time, uniform)"></textarea></div>
                </form>
            </div>
        </div>
        <ul class="list-group" id="games-list-container"></ul>
    </div>

    <div class="tab-pane fade" id="collaboration">
        <h4>Coaches Log</h4>
        <div class="row">
            <div class="col-md-6">
                <h5>Team Notes</h5>
                <div class="card mb-3"><div class="card-body">
                    <form action="{{ url_for('add_note', note_type='team_notes') }}" method="POST">
                        <textarea name="note_text" class="form-control mb-2" rows="3" placeholder="Add a new note for the whole team..."></textarea>
                        <button type="submit" class="btn btn-primary btn-sm">Add Team Note</button>
                    </form>
                </div></div>
                <div id="team-notes-container"></div>
            </div>
            <div class="col-md-6">
                <h5>Player Notes</h5>
                <div class="card mb-3"><div class="card-body">
                    <form action="{{ url_for('add_note', note_type='player_notes') }}" method="POST">
                        <select name="player_name" class="form-select mb-2" required id="collab-player-select"></select>
                        <textarea name="note_text" class="form-control mb-2" rows="3" placeholder="Add a new note for the selected player..."></textarea>
                        <button type="submit" class="btn btn-primary btn-sm">Add Player Note</button>
                    </form>
                </div></div>
                <div id="player-notes-container"></div>
            </div>
        </div>
    </div>

    <div class="tab-pane fade" id="practice_plan">
        <h4>Practice Plans</h4>
        <div class="card mb-4"><div class="card-body">
            <h5 class="card-title">Create New Practice Plan</h5>
            <form action="{{ url_for('add_practice_plan') }}" method="POST">
                <div class="row">
                    <div class="col-md-3"><input type="date" name="plan_date" class="form-control" required></div>
                    <div class="col-md-7"><input type="text" name="general_notes" class="form-control" value="" placeholder="General theme or focus for the practice"></div>
                    <div class="col-md-2"><button type="submit" class="btn btn-primary w-100">Create Plan</button></div>
                </div>
            </form>
        </div></div>
        <div class="accordion" id="practicePlanAccordion"></div>
    </div>

    <div class="tab-pane fade" id="signs">
      <h4>Signs & Signals</h4>
        <div class="row">
            <div class="col-md-6"><div class="card"><div class="card-body">
                <h5 class="card-title">Add New Sign</h5>
                <form action="{{ url_for('add_sign') }}" method="POST">
                    <div class="mb-2"><input type="text" name="sign_name" class="form-control" placeholder="Sign Name (e.g., Steal, Bunt)" required></div>
                    <div class="mb-2"><input type="text" name="sign_indicator" class="form-control" placeholder="Indicator (e.g., Touch Belt)" required></div>
                    <button type="submit" class="btn btn-primary">Add Sign</button>
                </form>
            </div></div></div>
            <div class="col-md-6"><ul class="list-group" id="signs-list-container"></ul></div>
        </div>
    </div>
  </div>
</div>

<div class="more-menu-overlay hidden" id="more">
    <span class="more-menu-close-btn" id="more-menu-close-btn">&times;</span>
    <h4 class="mb-3">More Options</h4>
    <div class="list-group mb-4">
        <a class="list-group-item list-group-item-action" href="{{ url_for('pitching_rules') }}"><i class="bi bi-gavel me-2"></i>Pitching Rules</a>
        <a class="list-group-item list-group-item-action" data-bs-toggle="tab" href="#stats_tab" role="tab"><i class="bi bi-bar-chart-fill me-2"></i>Stats</a> {# ADDED: Stats link to mobile "More" menu #}
        <a class="list-group-item list-group-item-action" data-bs-toggle="tab" href="#scouting_list" role="tab"><i class="bi bi-binoculars-fill me-2"></i>Scouting List</a>
        <a class="list-group-item list-group-item-action" data-bs-toggle="tab" href="#pitching" role="tab"><i class="bi bi-bullseye me-2"></i>Pitching Log</a>
        <a class="list-group-item list-group-item-action" data-bs-toggle="tab" href="#collaboration" role="tab"><i class="bi bi-people-fill me-2"></i>Coaches Log</a>
        <a class="list-group-item list-group-item-action" data-bs-toggle="tab" href="#signs" role="tab"><i class="bi bi-signpost-split-fill me-2"></i>Signs & Signals</a>
    </div>
    <div class="list-group">
        {% if session.role in ['Head Coach', 'Super Admin'] %}
        <a class="list-group-item list-group-item-action" href="{{ url_for('user_management') }}"><i class="bi bi-person-badge-fill me-2"></i>User Management</a>
        <a class="list-group-item list-group-item-action" href="{{ url_for('admin_settings') }}"><i class="bi bi-gear-fill me-2"></i>Team Settings</a>
        {% endif %}
        <a class="list-group-item list-group-item-action" href="{{ url_for('change_password') }}"><i class="bi bi-key-fill me-2"></i>Change Password</a>
        <a class="list-group-item list-group-item-action" href="{{ url_for('logout') }}"><i class="bi bi-box-arrow-right me-2"></i>Logout</a>
    </div>
</div>


<nav class="navbar fixed-bottom bg-light d-lg-none">
    <div class="bottom-nav" role="tablist">
        <a class="nav-item active" data-bs-toggle="tab" href="#roster" role="tab" data-icon-inactive="bi bi-people" data-icon-active="bi bi-people-fill">
            <i class="bi bi-people-fill"></i>
            <span class="nav-label">Roster</span>
        </a>
        <a class="nav-item" data-bs-toggle="tab" href="#player_development" role="tab" data-icon-inactive="bi bi-graph-up-arrow" data-icon-active="bi bi-graph-up-arrow">
            <i class="bi bi-graph-up-arrow"></i>
            <span class="nav-label">Development</span>
        </a>
        <a class="nav-item" data-bs-toggle="tab" href="#games" role="tab" data-icon-inactive="bi bi-calendar-event" data-icon-active="bi bi-calendar-event-fill">
            <i class="bi bi-calendar-event"></i>
            <span class="nav-label">Games</span>
        </a>
        <a class="nav-item" data-bs-toggle="tab" href="#practice_plan" role="tab" data-icon-inactive="bi bi-clipboard-check" data-icon-active="bi bi-clipboard-check-fill">
            <i class="bi bi-clipboard-check"></i>
            <span class="nav-label">Practice</span>
        </a>
        <a class="nav-item" id="mobile-more-button" href="#" data-icon-inactive="bi bi-three-dots" data-icon-active="bi bi-three-dots">
            <i class="bi bi-three-dots"></i>
            <span class="nav-label">More</span>
        </a>
    </div>
</nav>

<div class="modal fade" id="addPlayerModal" tabindex="-1" aria-labelledby="addPlayerModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addPlayerModalLabel">Add New Player</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form id="addPlayerForm" action="{{ url_for('add_player') }}" method="POST">
        <div class="modal-body">
            <div class="row g-3">
                <div class="col-md-6"><label class="form-label">Player Name</label><input type="text" class="form-control" name="name" required></div>
                <div class="col-md-6"><label class="form-label">Jersey Number</label><input type="number" class="form-control" name="number"></div>
                <div class="col-md-4"><label class="form-label">Primary Position</label>{{ position_select('position1', 'add_position1', '', title='') }}</div>
                <div class="col-md-4"><label class="form-label">Secondary Position</label>{{ position_select('position2', 'add_position2', '', title='') }}</div>
                <div class="col-md-4"><label class="form-label">Tertiary Position</label>{{ position_select('position3', 'add_position3', '', title='') }}</div>
                <div class="col-md-4"><label class="form-label">Throws</label><select name="throws" class="form-select"><option value="Right">Right</option><option value="Left">Left</option></select></div>
                <div class="col-md-4"><label class="form-label">Bats</label><select name="bats" class="form-select"><option value="Right">Right</option><option value="Left">Left</option></select></div>
                <div class="col-md-4"><label class="form-label">Pitcher Role</label><select name="pitcher_role" class="form-select"><option value="Not a Pitcher">Not a Pitcher</option><option value="Starter">Starter</option><option value="Reliever">Reliever</option></select></div>
                <div class="col-12"><label class="form-label">Notes</label><textarea class="form-control" name="notes" rows="2"></textarea></div>
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Add Player</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="editPlayerModal" tabindex="-1" aria-labelledby="editPlayerModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editPlayerModalLabel">Edit Player</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form id="editPlayerForm" method="POST">
        <div class="modal-body">
            <input type="hidden" name="player_id" id="edit_player_id">
            <div class="row g-3">
                <div class="col-md-6"><label class="form-label">Player Name</label><input type="text" class="form-control" name="name" id="edit_name" required></div>
                <div class="col-md-6"><label class="form-label">Jersey Number</label><input type="number" class="form-control" name="number" id="edit_number"></div>
                <div class="md-4"><label class="form-label">Primary Position</label>{{ position_select('position1', 'edit_position1', '', title='') }}</div>
                <div class="col-md-4"><label class="form-label">Secondary Position</label>{{ position_select('position2', 'edit_position2', '', title='') }}</div>
                <div class="col-md-4"><label class="form-label">Tertiary Position</label>{{ position_select('position3', 'edit_position3', '', title='') }}</div>
                <div class="col-md-4"><label class="form-label">Throws</label><select name="throws" class="form-select" id="edit_throws"><option value="Right">Right</option><option value="Left">Left</option></select></div>
                <div class="col-md-4"><label class="form-label">Bats</label><select name="bats" class="form-select" id="edit_bats"><option value="Right">Right</option><option value="Left">Left</option></select></div>
                <div class="col-md-4"><label class="form-label">Pitcher Role</label><select name="pitcher_role" class="form-select" id="edit_pitcher_role"><option value="Not a Pitcher">Not a Pitcher</option><option value="Starter">Starter</option><option value="Reliever">Reliever</option></select></div>
                <div class="col-12"><label class="form-label">Notes</label><textarea class="form-control" name="notes" id="edit_notes" rows="2"></textarea></div>
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="confirmDeleteModalLabel">Confirm Deletion</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are you sure you want to delete player <strong id="playerNameToDelete"></strong>? This action cannot be undone.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <a href="#" id="confirmDeleteButton" class="btn btn-danger">Delete</a>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="lineupEditorModal" tabindex="-1">
    <div class="modal-dialog modal-lg"><div class="modal-content">
        <div class="modal-header"><h5 class="modal-title" id="lineupEditorTitle">Unassigned Lineup Editor</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
        <div class="modal-body">
            <form id="lineupEditorForm" onsubmit="return false;">
                <input type="hidden" id="lineupId" name="lineup_id">
                <div class="row mb-3">
                    <div class="col-12"><label for="lineupTitle" class="form-label">Lineup Title</label><input type="text" class="form-control" id="lineupTitle" required></div>
                </div>
                <div class="row" id="lineup-editor-lists">
                    <div class="col-md-6"><h6>Available Players</h6><div id="lineup-bench" class="list-group border rounded p-2" style="min-height: 400px; max-height: 50vh; overflow-y: auto;"></div></div>
                    <div class="col-md-6"><h6>Batting Order</h6><div id="lineup-order" class="list-group border rounded p-2" style="min-height: 400px; max-height: 50vh; overflow-y: auto;"></div></div>
                </div>
            </form>
        </div>
        <div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button><button type="button" id="saveLineupBtn" class="btn btn-primary">Save Lineup</button></div>
    </div></div>
</div>
<div class="modal fade" id="editNoteModal" tabindex="-1">
  <div class="modal-dialog"><div class="modal-content">
    <div class="modal-header"><h5 class="modal-title">Edit Note</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
    <form id="editNoteForm" action="{{ url_for('edit_note') }}" method="POST">
      <div class="modal-body"><input type="hidden" id="editNoteId" name="note_id"><input type="hidden" id="editNoteType" name="note_type"><div class="mb-3"><label for="editNoteText" class="form-label">Note Text</label><textarea class="form-control" id="editNoteText" name="note_text" rows="5" required></textarea></div></div>
      <div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button><button type="submit" class="btn btn-primary">Save Changes</button></div>
    </form>
  </div></div>
</div>
<div class="modal fade" id="editFocusModal" tabindex="-1">
  <div class="modal-dialog"><div class="modal-content">
    <form id="focusForm" method="POST">
      <div class="modal-header"><h5 class="modal-title" id="focusModalTitle">Development Focus</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
      <div class="modal-body">
        <input type="hidden" id="focusId" name="focus_id">
        <div class="mb-3"><label for="focusSkill" class="form-label">Skill Area</label><select id="focusSkill" name="skill" class="form-select" required><option value="hitting">Hitting</option><option value="pitching">Pitching</option><option value="fielding">Fielding</option><option value="baserunning">Baserunning</option></select></div>
        <div class="mb-3"><label for="focusText" class="form-label">Focus / Goal</label><input type="text" class="form-control" id="focusText" name="focus_text" required></div>
        <div class="mb-3"><label for="focusNotes" class="form-label">Additional Notes</label><textarea class="form-control" id="focusNotes" name="notes" rows="3"></textarea></div>
      </div>
      <div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button><button type="submit" class="btn btn-primary">Save Focus</button></div>
    </form>
  </div></div>
</div>
<div class="modal fade" id="editSignModal" tabindex="-1">
    <div class="modal-dialog"><div class="modal-content">
        <div class="modal-header"><h5 class="modal-title">Edit Sign</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
        <form id="editSignForm" method="POST">
            <div class="modal-body">
                <input type="hidden" name="index" id="editSignIndex">
                <div class="mb-2"><label class="form-label">Sign Name</label><input type="text" id="editSignName" name="sign_name" class="form-control" required></div>
                <div class="mb-2"><label class="form-label">Indicator</label><input type="text" id="editSignIndicator" name="sign_indicator" class="form-control" required></div>
            </div>
            <div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button><button type="submit" class="btn btn-primary">Save Changes</button></div>
        </form>
    </div></div>
</div>

<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/static/service-worker.js')
            .then(reg => console.log('Service worker registered.', reg))
            .catch(err => console.log('Service worker not registered.', err));
    }
</script>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>

</body>
</html>